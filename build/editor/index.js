(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,o=window.wp.editor,r=window.wp.data,n=window.wp.element,i=window.wp.components,a=window.wp.apiFetch;var d=e.n(a);const s=window.ReactJSXRuntime,c={youtube:{pattern:/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i,embed_url:"https://www.youtube.com/embed/%s"},vimeo:{pattern:/(?:vimeo\.com\/)([0-9]+)/i,embed_url:"https://player.vimeo.com/video/%s"},bunnycdn:{pattern:/(?:bunnycdn\.com\/video\/)([^"&?\/\s]+)/i,embed_url:"https://iframe.mediadelivery.net/embed/%s"}};(0,t.registerPlugin)("course-video-panel",{render:()=>{const e=(0,r.useSelect)((e=>e("core/editor").getCurrentPostId())),{editPost:t}=(0,r.useDispatch)("core/editor"),[a,u]=(0,n.useState)(""),[l,p]=(0,n.useState)("");return(0,n.useEffect)((()=>{d()({path:`/wp/v2/lithe_course/${e}`}).then((e=>{e.meta&&e.meta._video&&u(e.meta._video.video_url||"")})).catch((e=>{console.error("Error fetching video data:",e)}))}),[e]),(0,s.jsx)(o.PluginDocumentSettingPanel,{name:"course-video-panel",title:"Course Video",className:"course-video-panel",children:(0,s.jsxs)("div",{className:"course-video-input",children:[(0,s.jsx)(i.TextControl,{label:"Video URL",value:a,onChange:t=>{if(u(t),(e=>{if(!e)return p(""),!0;for(const[t,o]of Object.entries(c))if(o.pattern.test(e))return p(""),!0;return p("Invalid video URL. Please enter a valid YouTube, Vimeo, or BunnyCDN URL."),!1})(t)){const o={video_url:t};for(const[e,r]of Object.entries(c))if(r.pattern.test(t)){const n=t.match(r.pattern);o.video_platform=e,o.video_id=n[1];break}d()({path:`/wp/v2/lithe_course/${e}`,method:"POST",data:{meta:{_video:o}}}).catch((e=>{console.error("Error updating video data:",e),p("Failed to save video URL")}))}},help:"Enter a valid YouTube, Vimeo, or BunnyCDN URL."}),l&&(0,s.jsx)("div",{className:"components-notice is-error",style:{marginTop:"8px"},children:l})]})})},icon:"video-alt3"})})();